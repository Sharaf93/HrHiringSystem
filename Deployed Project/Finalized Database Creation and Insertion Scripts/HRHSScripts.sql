--<ScriptOptions statementTerminator=";"/>

CREATE TABLE "HRHSSCHEMA".Candidates (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ),
		fullName VARCHAR(128) NOT NULL, 
		mobileNumber BIGINT NOT NULL UNIQUE,
		phoneNumber BIGINT, 
		email VARCHAR(128) NOT NULL UNIQUE, 
		dateCreated timestamp default current_timestamp NOT NULL, 
		currentCompanyName VARCHAR(50), 
		currentSalary DECIMAL(16 , 2), 
		yearsOfExperience INTEGER NOT NULL, 
		currentPosition VARCHAR(128), 
		statusID BIGINT NOT NULL, 
		offerStatusID BIGINT NOT NULL, 
		offerRejectionReason VARCHAR(128), 
		sourceID BIGINT NOT NULL, 
		HRSourceID BIGINT NOT NULL, 
		positionsID BIGINT NOT NULL, 
		reasonsOfFailureID BIGINT,
		dateOfBirth VARCHAR(20),
		CV VARCHAR(1024),
        CURRENTPHASEID BIGINT NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;

CREATE TABLE "HRHSSCHEMA".HRSource (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ), 
		name VARCHAR(128) NOT NULL,
		userName VARCHAR(128) NOT NULL UNIQUE,
		position VARCHAR(128) NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;



CREATE TABLE "HRHSSCHEMA".phaseStatus (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ), 
		name VARCHAR(30) NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;

CREATE TABLE "HRHSSCHEMA".phases (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ), 
		name VARCHAR(50) NOT NULL,
		phaseOrder BIGINT NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;

CREATE TABLE "HRHSSCHEMA".phasesDetails (
		candidatesID BIGINT NOT NULL, 
		phasesID BIGINT NOT NULL, 
		phaseStatusID BIGINT NOT NULL, 
		dateOfPhase DATE, 
		comments LONG VARCHAR,
		lastModifiedByID BIGINT NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;

CREATE TABLE "HRHSSCHEMA".positions (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ), 
		name VARCHAR(128) NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;

CREATE TABLE "HRHSSCHEMA".reasonsOfFailure (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ), 
		name VARCHAR(128) NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;

CREATE TABLE "HRHSSCHEMA".source (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ), 
		name VARCHAR(128) NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;

CREATE TABLE "HRHSSCHEMA".tests (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ), 
		name VARCHAR(30) NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;

CREATE TABLE "HRHSSCHEMA".testsDetails (
		candidatesID BIGINT NOT NULL, 
		testsID BIGINT NOT NULL, 
		score INTEGER NOT NULL
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;
	
CREATE TABLE "HRHSSCHEMA".CandidateStatus (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ), 
        status VARCHAR(128)
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;

CREATE TABLE "HRHSSCHEMA".OfferStatus (
		ID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE -9223372036854775808 MAXVALUE 9223372036854775807 NO CYCLE CACHE 20 NO ORDER ), 
        statusname VARCHAR(128)
	)
	DATA CAPTURE NONE 
	IN "USERSPACE1"
	COMPRESS NO;	
	
	
ALTER TABLE "HRHSSCHEMA".Candidates ADD CONSTRAINT "SQL160908185920740" PRIMARY KEY
	(ID);

ALTER TABLE "HRHSSCHEMA".HRSource ADD CONSTRAINT "SQL160908181507080" PRIMARY KEY
	(ID);

ALTER TABLE "HRHSSCHEMA".phaseStatus ADD CONSTRAINT "SQL160908191112820" PRIMARY KEY
	(ID);

ALTER TABLE "HRHSSCHEMA".phases ADD CONSTRAINT "SQL160908191056740" PRIMARY KEY
	(ID);

ALTER TABLE "HRHSSCHEMA".phasesDetails ADD CONSTRAINT "SQL160919113200040" PRIMARY KEY
	(candidatesID, 
	 phasesID);

ALTER TABLE "HRHSSCHEMA".positions ADD CONSTRAINT "SQL160908181545810" PRIMARY KEY
	(ID);

ALTER TABLE "HRHSSCHEMA".reasonsOfFailure ADD CONSTRAINT "SQL160908181600570" PRIMARY KEY
	(ID);

ALTER TABLE "HRHSSCHEMA".source ADD CONSTRAINT "SQL160908181441180" PRIMARY KEY
	(ID);

ALTER TABLE "HRHSSCHEMA".tests ADD CONSTRAINT "SQL160908191134660" PRIMARY KEY
	(ID);

ALTER TABLE "HRHSSCHEMA".testsDetails ADD CONSTRAINT "SQL160908194736170" PRIMARY KEY
	(candidatesID, 
	 testsID);
	 
ALTER TABLE "HRHSSCHEMA".CandidateStatus ADD CONSTRAINT cstatus PRIMARY KEY
	(ID);
	
ALTER TABLE "HRHSSCHEMA".OfferStatus ADD CONSTRAINT ostatus PRIMARY KEY
	(ID);
	
ALTER TABLE "HRHSSCHEMA".Candidates ADD CONSTRAINT "SQL160908185920850" FOREIGN KEY
	(sourceID)
	REFERENCES "HRHSSCHEMA".source
	(ID);

ALTER TABLE "HRHSSCHEMA".Candidates ADD CONSTRAINT "SQL160908185920999" FOREIGN KEY
	(HRSourceID)
	REFERENCES "HRHSSCHEMA".HRSource
	(ID);

ALTER TABLE "HRHSSCHEMA".Candidates ADD CONSTRAINT "SQL160908185920900" FOREIGN KEY
	(positionsID)
	REFERENCES "HRHSSCHEMA".positions
	(ID);

ALTER TABLE "HRHSSCHEMA".Candidates ADD CONSTRAINT "SQL160908185920910" FOREIGN KEY
	(reasonsOfFailureID)
	REFERENCES "HRHSSCHEMA".reasonsOfFailure
	(ID);

ALTER TABLE "HRHSSCHEMA".Candidates ADD CONSTRAINT PHASEID FOREIGN KEY
	(CURRENTPHASEID)
	REFERENCES "HRHSSCHEMA".phases
	(ID);
	
	ALTER TABLE "HRHSSCHEMA".Candidates ADD CONSTRAINT offerstatusID FOREIGN KEY
	(OFFERSTATUSID)
	REFERENCES "HRHSSCHEMA".offerStatus
	(ID);
	
	ALTER TABLE "HRHSSCHEMA".Candidates ADD CONSTRAINT STATUSIDC FOREIGN KEY
	(statusID)
	REFERENCES "HRHSSCHEMA".CandidateStatus
	(ID);

ALTER TABLE "HRHSSCHEMA".phasesDetails ADD CONSTRAINT "SQL160919124213460" FOREIGN KEY
	(candidatesID)
	REFERENCES "HRHSSCHEMA".Candidates
	(ID);
	
	ALTER TABLE "HRHSSCHEMA".phasesDetails ADD FOREIGN KEY
	(phaseStatusID)
	REFERENCES "HRHSSCHEMA".phaseStatus
	(ID);

ALTER TABLE "HRHSSCHEMA".phasesDetails ADD CONSTRAINT "SQL160919124349880" FOREIGN KEY
	(phasesID)
	REFERENCES "HRHSSCHEMA".phases
	(ID);
	
ALTER TABLE "HRHSSCHEMA".phasesDetails ADD CONSTRAINT fk_phasesDetails FOREIGN KEY
	(lastModifiedByID)
	REFERENCES "HRHSSCHEMA".HRSource
	(ID);

	
ALTER TABLE "HRHSSCHEMA".testsDetails ADD CONSTRAINT "SQL160919123122810" FOREIGN KEY
	(testsID)
	REFERENCES "HRHSSCHEMA".tests
	(ID);

ALTER TABLE HRHSSCHEMA.testsDetails ADD CONSTRAINT "SQL160919123259400" FOREIGN KEY
	(candidatesID)
	REFERENCES "HRHSSCHEMA".Candidates
	(ID);

